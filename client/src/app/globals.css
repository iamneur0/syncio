@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }

  /* Reserve space for scrollbar to prevent layout shift */
  .scrollbar-stable {
    scrollbar-gutter: stable;
  }
}

@layer base {
  :root {
    --color-background: #f3f4f6;
    --color-surface: #ffffff;
    --color-text: #0f172a;
    --color-text-secondary: #475569;
    --color-hover: #e2e8f0;
    --color-border: #e2e8f0;
    --color-shadow: rgba(15, 23, 42, 0.08);
    --color-positive: #22c55e;
    --color-negative: #ef4444;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 80%, var(--color-text) 20%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 12%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 8%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.light {
    --color-background: #f3f4f6;
    --color-surface: #ffffff;
    --color-text: #0f172a;
    --color-text-secondary: #475569;
    --color-hover: #e2e8f0;
    --color-border: #e2e8f0;
    --color-shadow: rgba(15, 23, 42, 0.08);
    --color-positive: #22c55e;
    --color-negative: #ef4444;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 80%, var(--color-text) 20%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 12%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 8%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.dark {
    --color-background: #0f172a;
    --color-surface: #1e293b;
    --color-text: #e2e8f0;
    --color-text-secondary: #94a3b8;
    --color-hover: #1f2937;
    --color-border: #334155;
    --color-shadow: rgba(8, 15, 30, 0.4);
    --color-positive: #4ade80;
    --color-negative: #f87171;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 65%, var(--color-text) 35%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 18%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 12%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.mono {
    --color-background: #000000;
    --color-surface: #0f0f0f;
    --color-text: #f5f5f5;
    --color-text-secondary: #9ca3af;
    --color-hover: #1a1a1a;
    --color-border: #1f1f1f;
    --color-shadow: rgba(0, 0, 0, 0.6);
    --color-positive: #4ade80;
    --color-negative: #f87171;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 60%, var(--color-text) 40%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 20%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 15%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.aubergine {
    --color-background: #1f1029;
    --color-surface: #2c1c3a;
    --color-text: #f8f5ff;
    --color-text-secondary: #d8c4f0;
    --color-hover: #3b2750;
    --color-border: #4a2d63;
    --color-shadow: rgba(74, 45, 99, 0.45);
    --color-positive: #7dd3fc;
    --color-negative: #f87171;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 65%, var(--color-text) 35%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 18%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 12%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.hoth {
    --color-background: #f4f7fb;
    --color-surface: #ffffff;
    --color-text: #1f2937;
    --color-text-secondary: #6b7280;
    --color-hover: #e2e8f0;
    --color-border: #d1d5db;
    --color-shadow: rgba(148, 163, 184, 0.25);
    --color-positive: #0ea5e9;
    --color-negative: #ef4444;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 80%, var(--color-text) 20%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 12%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 8%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.aurora {
    --color-background: #141827;
    --color-surface: #1e2431;
    --color-text: #f4f5ff;
    --color-text-secondary: #d8dafe;
    --color-hover: #262d3f;
    --color-border: #2f3546;
    --color-shadow: rgba(47, 53, 70, 0.45);
    --color-positive: #a855f7;
    --color-negative: #f87171;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 65%, var(--color-text) 35%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 18%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 12%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.choco-mint {
    --color-background: #1f2620;
    --color-surface: #2b352c;
    --color-text: #f7f7f2;
    --color-text-secondary: #d1f7c4;
    --color-hover: #374237;
    --color-border: #405143;
    --color-shadow: rgba(64, 81, 67, 0.45);
    --color-positive: #10b981;
    --color-negative: #f87171;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 65%, var(--color-text) 35%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 18%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 12%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.ochin {
    --color-background: #101f33;
    --color-surface: #172a46;
    --color-text: #f1f5f9;
    --color-text-secondary: #bcd2f9;
    --color-hover: #203555;
    --color-border: #29446b;
    --color-shadow: rgba(41, 68, 107, 0.45);
    --color-positive: #38bdf8;
    --color-negative: #f87171;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 65%, var(--color-text) 35%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 18%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 12%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  html.work-hard {
    --color-background: #2d2213;
    --color-surface: #3a2d1a;
    --color-text: #fdf5e6;
    --color-text-secondary: #f5d099;
    --color-hover: #453523;
    --color-border: #54422a;
    --color-shadow: rgba(84, 66, 42, 0.45);
    --color-positive: #facc15;
    --color-negative: #f97316;
    --color-button-bg: color-mix(in srgb, var(--color-surface) 65%, var(--color-text) 35%);
    --toggle-track-on: color-mix(in srgb, var(--color-text) 18%, var(--color-surface));
    --toggle-track-off: color-mix(in srgb, var(--color-text-secondary) 12%, var(--color-surface));
    --toggle-knob-on: var(--color-text);
    --toggle-knob-off: var(--color-text-secondary);
  }

  /* Chart colors - using theme colors for consistency */
  :root {
    --chart-1: 220 14% 96%;
    --chart-2: 220 13% 91%;
    --chart-3: 216 12% 84%;
    --chart-4: 218 11% 65%;
    --chart-5: 220 9% 46%;
  }

  html.dark {
    --chart-1: 220 20% 30%;
    --chart-2: 220 18% 35%;
    --chart-3: 220 16% 40%;
    --chart-4: 220 14% 45%;
    --chart-5: 220 12% 50%;
  }

  html.mono {
    --chart-1: 0 0% 15%;
    --chart-2: 0 0% 20%;
    --chart-3: 0 0% 25%;
    --chart-4: 0 0% 30%;
    --chart-5: 0 0% 35%;
  }

  html.aubergine {
    --chart-1: 280 25% 35%;
    --chart-2: 280 23% 40%;
    --chart-3: 280 21% 45%;
    --chart-4: 280 19% 50%;
    --chart-5: 280 17% 55%;
  }

  html.hoth {
    --chart-1: 200 30% 85%;
    --chart-2: 200 28% 80%;
    --chart-3: 200 26% 75%;
    --chart-4: 200 24% 70%;
    --chart-5: 200 22% 65%;
  }

  html.aurora {
    --chart-1: 250 30% 35%;
    --chart-2: 250 28% 40%;
    --chart-3: 250 26% 45%;
    --chart-4: 250 24% 50%;
    --chart-5: 250 22% 55%;
  }

  html.choco-mint {
    --chart-1: 120 20% 35%;
    --chart-2: 120 18% 40%;
    --chart-3: 120 16% 45%;
    --chart-4: 120 14% 50%;
    --chart-5: 120 12% 55%;
  }

  html.ochin {
    --chart-1: 210 35% 35%;
    --chart-2: 210 33% 40%;
    --chart-3: 210 31% 45%;
    --chart-4: 210 29% 50%;
    --chart-5: 210 27% 55%;
  }

  html.work-hard {
    --chart-1: 40 30% 35%;
    --chart-2: 40 28% 40%;
    --chart-3: 40 26% 45%;
    --chart-4: 40 24% 50%;
    --chart-5: 40 22% 55%;
  }

  html {
    @apply min-h-screen;
    /* Reserve space for scrollbar to prevent layout shift when it appears/disappears */
    scrollbar-gutter: stable;
  }

  body {
    @apply min-h-screen;
    /* Reserve space for scrollbar to prevent layout shift - applies globally */
    scrollbar-gutter: stable;
    background-color: var(--color-background);
    color: var(--color-text);
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  /* Apply to common scrollable containers to prevent layout shift everywhere */
  main,
  [role="main"],
  .overflow-auto,
  .overflow-y-auto,
  .overflow-x-auto,
  .overflow-scroll,
  .overflow-y-scroll,
  .overflow-x-scroll {
    scrollbar-gutter: stable;
  }
}

@layer components {
  .color-background { background-color: var(--color-background) !important; }
  .color-surface { background-color: var(--color-surface) !important; }
  .color-text { color: var(--color-text) !important; }
  .color-text-secondary { color: var(--color-text-secondary) !important; }
  .color-border { border-color: var(--color-border) !important; }

  .color-hover {
    transition: color 0.2s ease;
  }
  .color-hover:hover,
  .color-hover.is-active {
    text-shadow: 0.02em 0 currentColor, -0.02em 0 currentColor;
  }
  .color-hover:hover svg,
  .color-hover.is-active svg {
    stroke-width: 2.4;
  }
  .color-hover.is-active:hover {
    text-shadow: 0.02em 0 currentColor, -0.02em 0 currentColor;
  }
  .color-hover.is-active:hover svg {
    stroke-width: 2.4;
  }

  .color-control { accent-color: var(--color-text); }

  .surface-interactive {
    background-color: var(--color-surface) !important;
    border: none !important;
    color: var(--color-text);
    transition: color 0.2s ease;
  }
  .surface-interactive:hover,
  .surface-interactive.is-active {
    text-shadow: 0.02em 0 currentColor, -0.02em 0 currentColor;
  }
  .surface-interactive:hover svg,
  .surface-interactive.is-active svg {
    stroke-width: 2.4;
  }
  .surface-interactive.is-active:hover {
    text-shadow: 0.02em 0 currentColor, -0.02em 0 currentColor;
  }
  .surface-interactive.is-active:hover svg {
    stroke-width: 2.4;
  }

  .toggle-track-on { background-color: var(--toggle-track-on) !important; }
  .toggle-track-off { background-color: var(--toggle-track-off) !important; }
  .toggle-knob-on { background-color: var(--toggle-knob-on) !important; }
  .toggle-knob-off { background-color: var(--toggle-knob-off) !important; }

  input.control-radio,
  .selection-indicator {
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 9999px;
    border: 2px solid currentColor;
    color: var(--color-border);
    background-color: var(--color-surface);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: box-shadow 0.2s ease;
  cursor: pointer;
  }
  input.control-radio::after,
  .selection-indicator::after {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 9999px;
    background-color: transparent;
    transition: background-color 0.2s ease;
  }
  input.control-radio:checked::after,
  .selection-indicator.is-selected::after {
    background-color: currentColor;
  }
  input.control-radio:focus-visible,
  .selection-indicator:focus-visible {
    outline: 2px solid var(--toggle-track-on);
    outline-offset: 2px;
  }

  .selection-ring {
    outline: none;
    border-color: var(--color-text) !important;
  }

  .card {
    @apply rounded-lg transition-shadow;
    background-color: var(--color-surface);
    border: 2px solid transparent;
    color: var(--color-text);
    box-shadow: 0 8px 24px color-mix(in srgb, var(--color-shadow) 35%, transparent);
  }
  .card.card-selectable {
    border-color: var(--color-border);
  }
  .card.card-selectable.card-selected {
    border-color: color-mix(in srgb, var(--color-text) 25%, transparent);
    outline: 2px solid color-mix(in srgb, var(--color-text) 25%, transparent);
    outline-offset: -2px;
  }
  /* Selection style for backgroundless cards (activity card view) */
  .card-selectable.card-selected {
    outline: 3px solid color-mix(in srgb, var(--color-text) 50%, transparent);
    outline-offset: 0px;
  }

.section-panel {
  background: color-mix(in srgb, var(--color-background) 96%, var(--color-surface) 4%) !important;
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent) !important;
  box-shadow: none !important;
  color: var(--color-text);
}
  .card-header {
    @apply px-6 py-4 border-b;
    border-color: var(--color-border);
  }
  .card-body { @apply p-6; }

  .input {
    @apply block w-full px-3 py-2 rounded-lg shadow-sm focus:outline-none sm:text-sm;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text);
  }
  .input::placeholder { color: var(--color-text-secondary); }
  .input:focus {
    background-color: var(--color-surface);
    border-color: var(--color-text-secondary);
  }

  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-lg focus:outline-none focus:ring-0 disabled:opacity-50 disabled:cursor-not-allowed;
    background-color: var(--color-surface);
    border: 1px solid currentColor;
    color: var(--color-text);
    transition: color 0.2s ease;
  }
  .btn:hover,
  .btn.is-active {
    text-shadow: 0.02em 0 currentColor, -0.02em 0 currentColor;
  }
  .btn:hover svg,
  .btn.is-active svg {
    stroke-width: 2.4;
  }
  .btn.is-active:hover {
    text-shadow: 0.02em 0 currentColor, -0.02em 0 currentColor;
  }
  .btn.is-active:hover svg {
    stroke-width: 2.4;
  }
  .btn-primary,
  .btn-secondary,
  .btn-outline,
  .btn-danger { @apply btn; }

  .badge {
    @apply inline-flex items-center px-2 py-1 text-xs font-medium rounded;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text-secondary);
  }

  .color-hover-text {
    transition: color 0.2s ease;
  }
  .color-hover-text:hover {
    color: var(--color-text);
  }

  .logo-circle-10 {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
    background-color: transparent;
    color: var(--color-text);
  }

  .logo-circle-12 {
    width: 3rem;
    height: 3rem;
    border-radius: 9999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
    background-color: transparent;
    color: var(--color-text);
  }

  .logo-img,
  .logo-img-fill {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    border-radius: 9999px;
    background-color: transparent;
  }

  button:focus,
  .color-hover:focus,
  button:focus-visible,
  .color-hover:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400;
}

/* Loading animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

/* Fade in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* Line clamp utility */
.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}
